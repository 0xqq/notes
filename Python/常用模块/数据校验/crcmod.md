# 前提概要

> 在数据传输过程中,系统再怎么完美,差错总会存在,这种差错可能导致在链路上传输的一个或多个帧被破坏(如比特差错, 0变为1或1变为0),从而导致接收方收到错误的数据.为尽量提高接收方收到数据的完整性和正确性,在接收方接收数据前需要对数据进行差错检测,当且仅当检测的结果为正确时接收方才真正收下数据,检测的方式有多种,常见的有奇偶校验,累加和校验,循环冗余校验等.

# 循环冗余校验

## 简单介绍

* CRC即循环冗余校验,是数据通信领域中最常用的一种查错校验码,其特征是信息段和校验段的长度可以任意指定.

## 基本原理

* 发送方在P位二进制信息帧序列后附加一个R位二进制校验码帧序列,从而构成一个总长为N=P+R的二进制帧序列,R与P之前存在某种特定关系,如果数据被篡改,这种特定关系将被破坏,所以接收端可通过检查这一关系实现对数据正确性校验.

## 基本概念

* 模二运算

> 模二运算是一种二进制算法,是CRC校验核心.与四则运算相同的是模二运算也包括模二加,模二减,模二乘,模二除,但不同的是模二运算不考虑进位和借位.

```bash
# 算术除法
示例: 120 / 9 = 13 余 3, 120是被除数, 9是除数, 13是商, 3是余数

# 模二除法
规律: 同为0, 异为1
示例:
          1110       # 14(1110)商
     ---------
1001 | 1111000       # 120(1111000)是被除数,9(1001)是除数
       1001
     ---------
        110000
        1001
     ---------
         10100
         1001
     ---------
           110       # 6(110)是余数
```

* 帧校验码

* 生成多项式
> 当CRC校验时,发送方和接收方需要事先约定一个除数(生成多项式),除数的最高位与最低位必须是1,常见的生成多项式如下

| 算法名    | 多项式                                                       | 宽度 |
| --------- | ------------------------------------------------------------ | ---- |
| CRC-8     | x8 + x5 + x4 + 1                                             | 8    |
| CRC-16    | x16 + x15 + x2 + 1                                           | 16   |
| CRC-CCITT | x16 + x12 + x5 + 1                                           | 16   |
| CRC-32    | x32 + x26 + x23 + x22 + x16 + x12 + x11 + x10 + x8 + x7 + x5 + x4 + x2 + x1 + 1 | 32   |

## 校验流程

* 

